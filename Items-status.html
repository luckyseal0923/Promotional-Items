<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<title>å…¬é—œå“ç”³è«‹ç‹€æ…‹çœ‹æ¿</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Noto Sans TC", Arial, sans-serif;
  background:#f6f7f9;
  padding:20px;
}

h1 {
  text-align:center;
  margin-bottom:20px;
}

/* ===== æŸ¥è©¢å€ ===== */
.search-box {
  max-width:1200px;
  margin:0 auto 24px;
  display:flex;
  gap:10px;
}

.search-box input {
  flex:1;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
}

.search-box button {
  padding:10px 16px;
  border:none;
  border-radius:8px;
  background:#0A84FF;
  color:#fff;
  cursor:pointer;
}

/* ===== çœ‹æ¿ ===== */
.board {
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  gap:20px;
  max-width:1200px;
  margin:auto;
}

.card {
  background:#fff;
  border-radius:12px;
  padding:16px;
  box-shadow:0 2px 10px rgba(0,0,0,0.08);
}

.card h3 {
  margin:0 0 4px;
  font-size:16px;
}

.info {
  font-size:14px;
  margin-bottom:4px;
}

/* ===== ç‹€æ…‹æ¢ ===== */
.timeline {
  display:flex;
  align-items:center;
  margin:14px 0;
}

.step {
  flex:1;
  text-align:center;
  font-size:12px;
  position:relative;
  color:#999;
}

.step::before {
  content:'';
  display:block;
  width:14px;
  height:14px;
  margin:0 auto 6px;
  border-radius:50%;
  background:#ccc;
}

.step::after {
  content:'';
  position:absolute;
  top:7px;
  left:50%;
  width:100%;
  height:2px;
  background:#ccc;
  z-index:-1;
}

.step:last-child::after {
  display:none;
}

.step.done {
  color:#0A84FF;
}
.step.done::before,
.step.done::after {
  background:#0A84FF;
}

.step.current {
  color:#28a745;
  font-weight:bold;
}
.step.current::before {
  background:#28a745;
}

.step.exception {
  color:#dc3545;
  font-weight:bold;
}
.step.exception::before {
  background:#dc3545;
}

/* ===== æ˜ç´° ===== */
.details {
  display:none;
  margin-top:10px;
  font-size:13px;
  color:#555;
  border-top:1px dashed #ddd;
  padding-top:10px;
}

.toggle-btn {
  margin-top:8px;
  background:none;
  border:none;
  color:#0A84FF;
  cursor:pointer;
  font-size:14px;
}

/* ===== çµæ¡ˆæ¸…å–® ===== */
.archive {
  max-width:1200px;
  margin:40px auto 0;
}

.archive h3 {
  cursor:pointer;
  font-size:16px;
}

.archive table {
  width:100%;
  border-collapse:collapse;
  background:#fff;
  margin-top:10px;
  display:none;
}

.archive th, .archive td {
  border-bottom:1px solid #eee;
  padding:8px;
  font-size:14px;
  text-align:left;
}

.archive th {
  background:#f0f2f5;
}
</style>
</head>

<body>

<h1>ğŸ“¦ å…¬é—œå“ç”³è«‹ç‹€æ…‹çœ‹æ¿</h1>

<!-- æŸ¥è©¢ -->
<div class="search-box">
  <input id="staffInput" placeholder="è¼¸å…¥å“¡ç·¨æŸ¥è©¢æ‰€æœ‰ç´€éŒ„ï¼ˆä¾‹ï¼šA12345ï¼‰" />
  <button onclick="render()">æŸ¥è©¢</button>
</div>

<!-- é€²è¡Œä¸­ -->
<div class="board" id="activeBoard"></div>

<!-- çµæ¡ˆæ¸…å–® -->
<div class="archive">
  <h3 onclick="toggleArchive()">â–¸ çµæ¡ˆæ¸…å–®ï¼ˆé»æ“Šå±•é–‹ï½œè¿‘åŠå¹´ï¼‰</h3>
  <table id="archiveTable">
    <thead>
      <tr>
        <th>è¨‚å–®ç·¨è™Ÿ</th>
        <th>ç”³è«‹äºº</th>
        <th>éƒ¨é–€</th>
        <th>ç”³è«‹æ—¥æœŸ</th>
        <th>çµæ¡ˆæ—¥æœŸ</th>
      </tr>
    </thead>
    <tbody id="archiveBody"></tbody>
  </table>
</div>

<script>
/* ===== è™›æ“¬è³‡æ–™ ===== */
const orders = [
  {
    task_id:'TASK-20260204-031',
    name:'ç‹å°æ˜',
    staff:'A12345',
    dept:'æ€¥è¨ºé†«å­¸éƒ¨',
    date:'2026/02/04',
    close:'2026/02/10',
    amount:1240,
    status:'PREPARING',
    items:['ç¶ åº•æ‰‹æè¢‹ Ã— 20','é†«é™¢ä¸‰è‰²ç­† Ã— 30']
  },
  {
    task_id:'TASK-20260131-018',
    name:'æ—æ€¡å›',
    staff:'A12345',
    dept:'æ•™å­¸éƒ¨',
    date:'2026/01/31',
    close:'2026/02/02',
    amount:460,
    status:'READY',
    items:['åŒ—é†«å¹³å®‰åŒ… Ã— 1']
  },
  {
    task_id:'TASK-20260201-044',
    name:'ç‹å°æ˜',
    staff:'A12345',
    dept:'æ€¥è¨ºé†«å­¸éƒ¨',
    date:'2026/02/01',
    close:'',
    amount:900,
    status:'EXCEPTION',
    items:['å®£å°è³‡æ–™å¤¾ Ã— 10']
  }
];

function render(){
  const staff = document.getElementById('staffInput').value.trim();
  const active = document.getElementById('activeBoard');
  const archive = document.getElementById('archiveBody');
  active.innerHTML='';
  archive.innerHTML='';

  orders.filter(o => !staff || o.staff===staff).forEach(o=>{
    if(o.status==='READY'){
      archive.innerHTML+=`
        <tr>
          <td>${o.task_id}</td>
          <td>${o.name}ï¼ˆ${o.staff}ï¼‰</td>
          <td>${o.dept}</td>
          <td>${o.date}</td>
          <td>${o.close}</td>
        </tr>`;
    }else{
      active.innerHTML+=`
      <div class="card">
        <h3>${o.task_id}</h3>
        <div class="info">${o.name}ï¼ˆ${o.staff}ï¼‰ï½œ${o.dept}</div>
        <div class="info">ç”³è«‹æ—¥æœŸï¼š${o.date}</div>
        <div class="info">ç¸½é‡‘é¡ï¼šNT$ ${o.amount}</div>

        <div class="timeline">
          <div class="step ${['SUBMITTED','PREPARING','READY','EXCEPTION'].includes(o.status)?'done':''}">ç”³è«‹æå‡º</div>
          <div class="step ${o.status==='PREPARING'?'current':''}">å•†å“æº–å‚™ä¸­</div>
          <div class="step ${o.status==='READY'?'current':''}">å·²é€šçŸ¥é ˜å–</div>
          <div class="step ${o.status==='EXCEPTION'?'exception current':''}">ç•°å¸¸é€šçŸ¥</div>
        </div>

        <button class="toggle-btn" onclick="toggleDetails(this)">æŸ¥çœ‹æ¡ˆä»¶æ˜ç´°</button>
        <div class="details">${o.items.join('<br>')}</div>
      </div>`;
    }
  });
}

function toggleDetails(btn){
  const d = btn.nextElementSibling;
  d.style.display = d.style.display==='block'?'none':'block';
  btn.textContent = d.style.display==='block'?'æ”¶åˆæ¡ˆä»¶æ˜ç´°':'æŸ¥çœ‹æ¡ˆä»¶æ˜ç´°';
}

function toggleArchive(){
  const t=document.getElementById('archiveTable');
  t.style.display = t.style.display==='table'?'none':'table';
}

render();
</script>

</body>
</html>
