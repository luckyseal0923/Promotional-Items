<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Phase 3ï½œå…¬é—œå“ç”³è«‹ç³»çµ±ï¼å¾Œè‡ºç®¡ç†</title>

<style>
  body{
    font-family:-apple-system,BlinkMacSystemFont,"Noto Sans TC",Arial,sans-serif;
    background:#f6f7f9;
    margin:0;
    padding:20px;
  }
  h1{ text-align:center; margin:0 0 18px; }
  .container{ max-width:1200px; margin:0 auto; }

  /* ===== å¡ç‰‡ ===== */
  .panel{
    background:#fff;
    border-radius:12px;
    padding:16px;
    box-shadow:0 2px 10px rgba(0,0,0,0.08);
    margin-bottom:18px;
  }

  /* ===== ä¸Šæ–¹åˆ— ===== */
  .topbar{
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:space-between;
    flex-wrap:wrap;
    margin-bottom:12px;
  }
  .badge{
    display:inline-block;
    padding:4px 10px;
    border-radius:999px;
    font-size:12px;
    background:#eef2ff;
    color:#1e40af;
  }
  .btn{
    border:none;
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    font-size:14px;
  }
  .btn-primary{ background:#0A84FF; color:#fff; }
  .btn-ghost{ background:#f1f5f9; color:#111; }
  .btn-danger{ background:#dc3545; color:#fff; }

  /* ===== Tabs ===== */
  .tabs{
    display:flex;
    gap:8px;
    margin:10px 0 0;
    flex-wrap:wrap;
  }
  .tab{
    padding:10px 14px;
    border-radius:999px;
    cursor:pointer;
    background:#f1f5f9;
    font-size:14px;
  }
  .tab.active{
    background:#0A84FF;
    color:#fff;
  }

  /* ===== è¡¨æ ¼ ===== */
  table{
    width:100%;
    border-collapse:collapse;
    background:#fff;
    overflow:hidden;
    border-radius:12px;
  }
  th, td{
    padding:12px 10px;
    border-bottom:1px solid #eee;
    text-align:left;
    vertical-align:top;
    font-size:14px;
  }
  th{ background:#f0f2f5; user-select:none; }
  tr:hover td{ background:#fafafa; }

  .muted{ color:#666; font-size:13px; }
  .small{ font-size:12px; color:#666; }

  /* ===== ç‹€æ…‹ ===== */
  .status-pill{
    display:inline-block;
    padding:4px 10px;
    border-radius:999px;
    font-size:12px;
    background:#eef2f7;
    color:#111;
    white-space:nowrap;
  }
  .s-submitted{ background:#e0f2fe; color:#075985; }
  .s-preparing{ background:#fff7ed; color:#9a3412; }
  .s-ready{ background:#ecfdf5; color:#065f46; }
  .s-exception{ background:#fee2e2; color:#991b1b; }

  /* ===== Form ===== */
  .grid{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:12px;
  }
  @media (max-width: 860px){
    .grid{ grid-template-columns:1fr; }
  }
  label{ font-size:13px; color:#333; display:block; margin-bottom:6px; }
  input, select, textarea{
    width:100%;
    padding:10px;
    border:1px solid #ccc;
    border-radius:10px;
    font-size:14px;
    box-sizing:border-box;
    background:#fff;
  }
  textarea{ min-height:88px; resize:vertical; }

  .row{
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap:wrap;
  }

  /* ===== Modal ===== */
  .modal-backdrop{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.35);
    display:none;
    align-items:center;
    justify-content:center;
    padding:16px;
    z-index:50;
  }
  .modal{
    width: min(900px, 100%);
    background:#fff;
    border-radius:14px;
    box-shadow:0 10px 40px rgba(0,0,0,0.25);
    overflow:hidden;
  }
  .modal-header{
    padding:14px 16px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#0A84FF;
    color:#fff;
  }
  .modal-body{ padding:16px; max-height:70vh; overflow-y:auto; }
  .modal-footer{
    padding:14px 16px;
    background:#f8fafc;
    display:flex;
    gap:10px;
    justify-content:flex-end;
    flex-wrap:wrap;
  }

  .hidden{ display:none; }

  /* ===== Login ===== */
  .login-wrap{
    min-height: calc(100vh - 40px);
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .login-card{
    width:min(400px, 100%);
    background:#fff;
    border-radius:14px;
    padding:24px;
    box-shadow:0 4px 20px rgba(0,0,0,0.1);
  }
</style>
</head>

<body>

<div id="loginPage" class="login-wrap">
  <div class="login-card">
    <h2 style="margin:0 0 8px;">ğŸ” å¾Œè‡ºç®¡ç†ç³»çµ±</h2>
    <div class="muted" style="margin-bottom:20px;">è«‹è¼¸å…¥ç®¡ç†å“¡å¸³è™Ÿèˆ‡å¯†ç¢¼</div>

    <div style="margin-bottom:15px;">
      <label>å¸³è™Ÿ</label>
      <input id="loginUser" placeholder="admin" value="admin" />
    </div>

    <div style="margin-bottom:20px;">
      <label>å¯†ç¢¼</label>
      <input id="loginPass" type="password" placeholder="1234" value="1234" />
    </div>

    <button class="btn btn-primary" style="width:100%;" onclick="doLogin()">ç«‹å³ç™»å…¥</button>
    <div style="text-align:center; margin-top:12px;">
      <span class="small">é è¨­æ¸¬è©¦ï¼šadmin / 1234</span>
    </div>
  </div>
</div>

<div id="adminPage" class="container hidden">
  <h1>ğŸ› ï¸ å…¬é—œå“ç”³è«‹ç³»çµ±ï¼å¾Œè‡ºç®¡ç†</h1>

  <div class="panel">
    <div class="topbar">
      <div>
        <span class="badge" id="adminInfo">Admin: -</span>
        <span class="badge" id="nowTime">-</span>
      </div>
      <div class="row">
        <button class="btn btn-ghost" onclick="seedData()">é‡ç½®è™›æ“¬è³‡æ–™</button>
        <button class="btn btn-danger" onclick="logout()">ç™»å‡º</button>
      </div>
    </div>

    <div class="tabs">
      <div class="tab active" id="tabOrders" onclick="switchTab('orders')">A. è¨‚å–®ç®¡ç†</div>
      <div class="tab" id="tabInventory" onclick="switchTab('inventory')">B. å•†å“èˆ‡åº«å­˜ç›¤é»</div>
      <div class="tab" id="tabLogs" onclick="switchTab('logs')">C. ç›¤é»ç´€éŒ„</div>
    </div>
  </div>

  <div id="viewOrders" class="panel">
    <div class="topbar">
      <b>è¨‚å–®åˆ—è¡¨</b>
      <div class="row">
        <select id="filterStatus" onchange="renderOrders()">
          <option value="">å…¨éƒ¨ç‹€æ…‹</option>
          <option value="SUBMITTED">ç”³è«‹æå‡º</option>
          <option value="PREPARING">å•†å“æº–å‚™ä¸­</option>
          <option value="READY">å·²é€šçŸ¥é ˜å–ï¼ˆçµæ¡ˆï¼‰</option>
          <option value="EXCEPTION">ç•°å¸¸é€šçŸ¥</option>
        </select>
        <input id="filterKeyword" placeholder="æœå°‹ï¼šç·¨è™Ÿ / å§“å / éƒ¨é–€" oninput="renderOrders()" />
      </div>
    </div>
    <table>
      <thead>
        <tr>
          <th>è¨‚å–®ç·¨è™Ÿ</th>
          <th>ç”³è«‹äºº</th>
          <th>éƒ¨é–€</th>
          <th>ç”³è«‹æ—¥æœŸ</th>
          <th>é‡‘é¡</th>
          <th>ç‹€æ…‹</th>
          <th>æ“ä½œ</th>
        </tr>
      </thead>
      <tbody id="ordersBody"></tbody>
    </table>
  </div>

  <div id="viewInventory" class="panel hidden">
    <b>å•†å“èˆ‡åº«å­˜ç›¤é»</b>
    <table style="margin-top:12px;">
      <thead>
        <tr>
          <th>å•†å“</th>
          <th>å–®åƒ¹</th>
          <th>ç¾æœ‰åº«å­˜</th>
          <th>ç›¤é»å‚™è¨»</th>
          <th>æ“ä½œ</th>
        </tr>
      </thead>
      <tbody id="itemsBody"></tbody>
    </table>
  </div>

  <div id="viewLogs" class="panel hidden">
    <b>ç›¤é»ç´€éŒ„ï¼ˆStock Logï¼‰</b>
    <table style="margin-top:12px;">
      <thead>
        <tr>
          <th>æ™‚é–“</th>
          <th>ç®¡ç†è€…</th>
          <th>å•†å“</th>
          <th>è®Šå‹•</th>
          <th>å‚™è¨»</th>
        </tr>
      </thead>
      <tbody id="logsBody"></tbody>
    </table>
  </div>
</div>

<script>
let currentAdmin = null;
const DEMO_USERS = [{ user:'admin', pass:'1234', name:'ç¸½å‹™ç®¡ç†è€…-Admin' }];

let ORDERS = [];
let ITEMS = [];
let STOCK_LOGS = [];

// Login Logic
function doLogin(){
  const u = document.getElementById('loginUser').value.trim();
  const p = document.getElementById('loginPass').value.trim();
  const ok = DEMO_USERS.find(x => x.user === u && x.pass === p);
  
  if(!ok){
    alert('å¸³å¯†éŒ¯èª¤');
    return;
  }

  currentAdmin = ok.name;
  document.getElementById('loginPage').classList.add('hidden');
  document.getElementById('adminPage').classList.remove('hidden');
  document.getElementById('adminInfo').textContent = `Admin: ${currentAdmin}`;

  seedData();
  tickClock();
  setInterval(tickClock, 1000);
}

function logout(){
  location.reload();
}

function tickClock(){
  document.getElementById('nowTime').textContent = new Date().toLocaleString('zh-TW');
}

// Data Management
function seedData(){
  ORDERS = [
    { task_id:'TASK-103', name:'å¼µæ™ºç¶­', staff:'104114', dept:'ER', created_at:'2026/02/04 10:12', status:'PREPARING', amount:1660, items:[{name:'åŒ—é†«å¹³å®‰åŒ…',qty:1}] },
    { task_id:'TASK-104', name:'æå°å§', staff:'104222', dept:'ER', created_at:'2026/02/03 14:05', status:'SUBMITTED', amount:460, items:[{name:'åŒ—é†«å¹³å®‰åŒ…',qty:1}] }
  ];
  ITEMS = [
    { id:'I001', name:'åŒ—é†«å¹³å®‰åŒ…', price:460, stock:15 },
    { id:'I002', name:'ç’°ä¿æè¢‹', price:50, stock:120 }
  ];
  STOCK_LOGS = [
    { at:'2026/02/01 09:10', by:'Admin', item:'åŒ—é†«å¹³å®‰åŒ…', change:'+10', note:'é€²è²¨' }
  ];
  renderAll();
}

function switchTab(tab){
  ['Orders','Inventory','Logs'].forEach(t => {
    document.getElementById('tab'+t).classList.toggle('active', t.toLowerCase()===tab);
    document.getElementById('view'+t).classList.toggle('hidden', t.toLowerCase()!==tab);
  });
}

function renderAll(){
  renderOrders();
  renderItems();
  renderLogs();
}

function renderOrders(){
  const body = document.getElementById('ordersBody');
  const fStatus = document.getElementById('filterStatus').value;
  const kw = document.getElementById('filterKeyword').value.toLowerCase();
  
  body.innerHTML = ORDERS.filter(o => 
    (!fStatus || o.status === fStatus) && 
    (o.name.toLowerCase().includes(kw) || o.task_id.toLowerCase().includes(kw))
  ).map(o => `
    <tr>
      <td>${o.task_id}</td>
      <td>${o.name} (${o.staff})</td>
      <td>${o.dept}</td>
      <td>${o.created_at}</td>
      <td>NT$ ${o.amount}</td>
      <td><span class="status-pill s-${o.status.toLowerCase()}">${o.status}</span></td>
      <td><button class="btn btn-ghost" onclick="alert('æŸ¥çœ‹è¨‚å–®ï¼š'+'${o.task_id}')">æŸ¥çœ‹</button></td>
    </tr>
  `).join('');
}

function renderItems(){
  document.getElementById('itemsBody').innerHTML = ITEMS.map(i => `
    <tr>
      <td>${i.name}</td>
      <td>${i.price}</td>
      <td><b>${i.stock}</b></td>
      <td><input style="width:120px" placeholder="ç›¤é»å‚™è¨»" id="note-${i.id}"></td>
      <td><button class="btn btn-primary" onclick="alert('æ¨¡æ“¬æ›´æ–°ï¼š'+'${i.name}')">ç›¤é»</button></td>
    </tr>
  `).join('');
}

function renderLogs(){
  document.getElementById('logsBody').innerHTML = STOCK_LOGS.map(l => `
    <tr>
      <td class="small">${l.at}</td>
      <td>${l.by}</td>
      <td>${l.item}</td>
      <td>${l.change}</td>
      <td class="muted">${l.note}</td>
    </tr>
  `).join('');
}
</script>

</body>
</html>
