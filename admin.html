<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç¿è­·å­¸é™¢ï½œå…¬é—œå“å¾Œè‡ºç®¡ç†ç³»çµ±</title>
    <style>
        :root {
            --primary: #0066FF;
            --success: #34C759;
            --danger: #FF3B30;
            --warning: #FF9500;
            --bg: #F5F7FA;
            --card-bg: #FFFFFF;
            --text-main: #1D1D1F;
            --text-muted: #86868B;
        }

        body, html {
            height: 100%; margin: 0;
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            background: var(--bg); color: var(--text-main);
            overflow-x: hidden;
        }

        /* å¼·åˆ¶éš±è—å·¥å…· */
        .hidden { display: none !important; }

        /* ===== ç™»å…¥è¦–çª— ===== */
        #loginView {
            display: flex; align-items: center; justify-content: center;
            height: 100vh; width: 100vw;
            background: linear-gradient(135deg, #0044AA 0%, #0066FF 100%);
            position: fixed; top: 0; left: 0; z-index: 1000;
        }
        .login-card {
            background: var(--card-bg); padding: 40px; border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); width: 100%; max-width: 360px;
            text-align: center;
        }

        /* ===== ç®¡ç†å¾Œè‡ºä½ˆå±€ ===== */
        #adminView { display: none; min-height: 100vh; }
        .sidebar {
            width: 260px; background: #fff; height: 100vh; position: fixed;
            border-right: 1px solid #E5E5E5; padding: 24px; box-sizing: border-box;
        }
        .main-content { margin-left: 260px; padding: 40px; max-width: 1200px; }

        /* å„€è¡¨æ¿å¡ç‰‡ */
        .stat-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-bottom: 32px; }
        .stat-card { 
            background: #fff; padding: 24px; border-radius: 20px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
            border-bottom: 4px solid var(--primary);
        }

        /* å…ƒä»¶æ¨£å¼ */
        .panel { background: #fff; border-radius: 20px; padding: 28px; box-shadow: 0 4px 20px rgba(0,0,0,0.02); }
        .btn {
            padding: 12px 20px; border-radius: 12px; border: none; font-weight: 600;
            cursor: pointer; transition: 0.2s; display: inline-flex; align-items: center; gap: 8px; font-size: 14px;
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-danger { background: #FFF0F0; color: var(--danger); }
        .btn-outline { background: transparent; border: 1px solid #DDD; }

        input, select, textarea {
            width: 100%; padding: 14px; margin: 8px 0 16px;
            border: 1px solid #E5E5E5; border-radius: 12px; background: #F9F9F9; font-size: 14px; box-sizing: border-box;
        }

        /* è¡¨æ ¼å„ªåŒ– */
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 16px; color: var(--text-muted); font-weight: 500; border-bottom: 1px solid #EEE; }
        td { padding: 18px 16px; border-bottom: 1px solid #F5F5F5; }
        .img-preview-sm { width: 48px; height: 48px; border-radius: 10px; object-fit: cover; background: #f0f0f0; }

        /* å°è¦½é …ç›® */
        .nav-item { 
            padding: 14px 18px; border-radius: 12px; margin-bottom: 8px; 
            cursor: pointer; color: var(--text-muted); transition: 0.3s;
        }
        .nav-item.active { background: #F0F6FF; color: var(--primary); font-weight: 700; }

        /* Modal å½ˆçª—æ¨£å¼ */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.6);
            display: none; align-items: center; justify-content: center; z-index: 2000;
            backdrop-filter: blur(4px);
        }
        .modal-content { background: #fff; padding: 32px; border-radius: 24px; width: 420px; box-shadow: 0 30px 60px rgba(0,0,0,0.4); }
    </style>
</head>
<body>

    <div id="loginView">
        <div class="login-card">
            <h2 style="margin-bottom:8px">ç¿è­·ç®¡ç†ç³»çµ±</h2>
            <p style="color:var(--text-muted); margin-bottom:32px">è«‹è¼¸å…¥ç®¡ç†å“¡æ†‘è­‰</p>
            
            <div style="text-align:left">
                <label>ç®¡ç†å“¡å¸³è™Ÿ</label>
                <input type="text" id="user" value="admin">
                <label>å®‰å…¨å¯†ç¢¼</label>
                <input type="password" id="pass" value="1234">
            </div>
            
            <button class="btn btn-primary" style="width:100%; justify-content:center; margin-top:10px" onclick="handleLogin()">ç™»å…¥å¾Œè‡º</button>
            <p style="font-size:12px; color:#AAA; margin-top:20px">Demo Access: admin / 1234</p>
        </div>
    </div>

    <div id="adminView">
        <div class="sidebar">
            <h2 style="color:var(--primary); margin-bottom:40px">ç¿è­·å­¸é™¢</h2>
            <div class="nav-item active" id="nav-dashboard" onclick="switchSection('dashboard')">ğŸ“Š å„€è¡¨æ¿ç¸½è¦½</div>
            <div class="nav-item" id="nav-orders" onclick="switchSection('orders')">ğŸ“¦ è¨‚å–®ç®¡ç†ç³»çµ±</div>
            <div class="nav-item" id="nav-inventory" onclick="switchSection('inventory')">ğŸ å•†å“ç¶­è­·èˆ‡ä¸Šæ¶</div>
            <div style="position:absolute; bottom:30px; width:212px">
                <hr style="border:0; border-top:1px solid #EEE; margin-bottom:20px">
                <div class="nav-item" onclick="location.reload()" style="color:var(--danger)">ğŸšª å®‰å…¨ç™»å‡º</div>
            </div>
        </div>

        <div class="main-content">
            <div id="section-dashboard" class="content-section">
                <h1>å„€è¡¨æ¿ç¸½è¦½</h1>
                <div class="stat-grid">
                    <div class="stat-card">
                        <div style="color:var(--text-muted); font-size:14px">å¾…è™•ç†è¨‚å–®</div>
                        <div style="font-size:32px; font-weight:bold; margin-top:8px">12 <span style="font-size:14px">ç­†</span></div>
                    </div>
                    <div class="stat-card" style="border-left: 4px solid var(--success)">
                        <div style="color:var(--text-muted); font-size:14px">æœ¬æœˆç´¯è¨ˆçµæ¡ˆ</div>
                        <div style="font-size:32px; font-weight:bold; margin-top:8px">158 <span style="font-size:14px">ç­†</span></div>
                    </div>
                    <div class="stat-card" style="border-left: 4px solid var(--warning)">
                        <div style="color:var(--text-muted); font-size:14px">åº«å­˜ä¸è¶³è­¦ç¤º</div>
                        <div style="font-size:32px; font-weight:bold; margin-top:8px">3 <span style="font-size:14px">é …</span></div>
                    </div>
                </div>
            </div>

            <div id="section-orders" class="content-section hidden">
                <h1>è¨‚å–®ç®¡ç†ç³»çµ±</h1>
                <div class="panel">
                    <table>
                        <thead>
                            <tr>
                                <th>ç·¨è™Ÿ</th><th>ç”³è«‹äºº</th><th>éƒ¨é–€</th><th>ç‹€æ…‹</th><th>é‡‘é¡</th><th>ç®¡ç†</th>
                            </tr>
                        </thead>
                        <tbody id="ordersBody"></tbody>
                    </table>
                </div>
            </div>

            <div id="section-inventory" class="content-section hidden">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:24px">
                    <h1>å•†å“ç¶­è­·èˆ‡ä¸Šæ¶</h1>
                    <button class="btn btn-primary" onclick="openModal()">ï¼‹ æ–°å¢å…¬é—œå“</button>
                </div>
                <div class="panel">
                    <table>
                        <thead>
                            <tr>
                                <th>ç¸®åœ–</th><th>å•†å“åç¨±</th><th>å–®åƒ¹</th><th>åº«å­˜é‡</th><th>ç®¡ç†</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="addModal" class="modal-overlay">
            <div class="modal-content">
                <h3 style="margin-top:0">æ–°å¢å•†å“è³‡è¨Š</h3>
                <label>å•†å“ç…§ç‰‡</label>
                <input type="file" id="itemPic" accept="image/*" onchange="previewImage(this)">
                <div id="previewBox" style="margin-bottom:15px; display:none">
                    <img id="uploadPreview" style="width:100%; height:150px; object-fit:contain; border-radius:12px; background:#f9f9f9">
                </div>
                
                <label>å•†å“åç¨±</label>
                <input type="text" id="itemName" placeholder="ä¾‹å¦‚ï¼šåŒ—é†«å¹³å®‰åŒ…">
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px">
                    <div>
                        <label>å–®åƒ¹ (NT$)</label>
                        <input type="number" id="itemPrice" value="460">
                    </div>
                    <div>
                        <label>åˆå§‹åº«å­˜</label>
                        <input type="number" id="itemStock" value="50">
                    </div>
                </div>
                
                <div style="display:flex; gap:12px; margin-top:20px">
                    <button class="btn btn-outline" style="flex:1; justify-content:center" onclick="closeModal()">å–æ¶ˆ</button>
                    <button class="btn btn-primary" style="flex:1; justify-content:center" onclick="confirmAddItem()">å„²å­˜ä¸Šæ¶</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–è™›æ“¬è³‡æ–™
        let MOCK_ORDERS = [
            { id: 'TASK-103', name: 'å¼µæ™ºç¶­', dept: 'æ€¥è¨ºå®¤', status: 'PREPARING', amount: 1660 },
            { id: 'TASK-104', name: 'æé›…å©·', dept: 'è­·ç†éƒ¨', status: 'SUBMITTED', amount: 460 },
            { id: 'TASK-105', name: 'ç‹å¤§åŒ', dept: 'å®¶é†«ç§‘', status: 'READY', amount: 920 }
        ];

        let MOCK_ITEMS = [
            { id: 1, name: 'åŒ—é†«å¹³å®‰åŒ…', price: 460, stock: 15, img: 'https://via.placeholder.com/150?text=Bag' },
            { id: 2, name: 'ç’°ä¿çº–ç¶­è¢‹', price: 50, stock: 120, img: 'https://via.placeholder.com/150?text=Tote' }
        ];

        // ç™»å…¥åŠŸèƒ½
        function handleLogin() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;

            if (u === 'admin' && p === '1234') {
                document.getElementById('loginView').style.display = 'none';
                document.getElementById('adminView').style.display = 'block';
                renderUI();
            } else {
                alert('ç™»å…¥å¤±æ•—ï¼šå¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤');
            }
        }

        // åˆ‡æ›å´é‚Šæ¬„
        function switchSection(secId) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
            document.getElementById('section-' + secId).classList.remove('hidden');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('nav-' + secId).classList.add('active');
        }

        // æ¸²æŸ“ç•«é¢
        function renderUI() {
            // è¨‚å–®æ¸²æŸ“
            document.getElementById('ordersBody').innerHTML = MOCK_ORDERS.map(o => `
                <tr>
                    <td><b>${o.id}</b></td><td>${o.name}</td><td>${o.dept}</td>
                    <td><span style="color:${o.status==='READY'?'#34C759':'#FF9500'}">â— ${o.status}</span></td>
                    <td>$${o.amount}</td>
                    <td><button class="btn btn-outline" style="padding:6px 12px">æŸ¥çœ‹</button></td>
                </tr>
            `).join('');

            // å•†å“æ¸²æŸ“
            document.getElementById('inventoryBody').innerHTML = MOCK_ITEMS.map(i => `
                <tr>
                    <td><img src="${i.img}" class="img-preview-sm"></td>
                    <td><b>${i.name}</b></td>
                    <td>$${i.price}</td>
                    <td style="${i.stock < 20 ? 'color:red; font-weight:bold' : ''}">${i.stock} ä»¶</td>
                    <td><button class="btn btn-danger" style="padding:6px 12px" onclick="deleteItem(${i.id})">ç§»é™¤</button></td>
                </tr>
            `).join('');
        }

        // å½ˆçª—æ§åˆ¶
        function openModal() {
            document.getElementById('addModal').style.display = 'flex';
        }
        function closeModal() {
            document.getElementById('addModal').style.display = 'none';
        }

        // åœ–ç‰‡é è¦½
        function previewImage(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('uploadPreview').src = e.target.result;
                    document.getElementById('previewBox').style.display = 'block';
                }
                reader.readAsDataURL(file);
            }
        }

        // æ–°å¢å•†å“
        function confirmAddItem() {
            const name = document.getElementById('itemName').value;
            const price = document.getElementById('itemPrice').value;
            const stock = document.getElementById('itemStock').value;
            const img = document.getElementById('uploadPreview').src;

            if (!name) return alert('è«‹è¼¸å…¥å•†å“åç¨±');

            MOCK_ITEMS.unshift({ id: Date.now(), name, price, stock, img });
            renderUI();
            closeModal();
            // é‡ç½®
            document.getElementById('itemName').value = '';
            document.getElementById('previewBox').style.display = 'none';
        }

        function deleteItem(id) {
            if(confirm('ç¢ºå®šè¦ç§»é™¤æ­¤å•†å“ï¼Ÿ')) {
                MOCK_ITEMS = MOCK_ITEMS.filter(i => i.id !== id);
                renderUI();
            }
        }
    </script>
</body>
</html>
