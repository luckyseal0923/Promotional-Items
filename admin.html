<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ç¿è­·å­¸é™¢ï½œå…¬é—œå“å¾Œè‡ºç®¡ç†ç³»çµ±</title>
<style>
  :root {
    --primary: #0066FF;
    --success: #34C759;
    --danger: #FF3B30;
    --warning: #FF9500;
    --bg: #F5F7FA;
    --card-bg: #FFFFFF;
    --text-main: #1D1D1F;
    --text-muted: #86868B;
  }

  body, html {
    height: 100%; margin: 0;
    font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
    background: var(--bg); color: var(--text-main);
  }

  /* ç™»å…¥è¦–çª—å„ªåŒ– */
  #loginView {
    display: flex; align-items: center; justify-content: center;
    height: 100vh; background: linear-gradient(135deg, #0044AA 0%, #0066FF 100%);
  }
  .login-card {
    background: var(--card-bg); padding: 40px; border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.2); width: 100%; max-width: 400px;
  }

  /* ç®¡ç†å¾Œè‡ºä½ˆå±€ */
  #adminView { display: none; min-height: 100vh; }
  .sidebar {
    width: 240px; background: #fff; height: 100vh; position: fixed;
    border-right: 1px solid #E5E5E5; padding: 20px; box-sizing: border-box;
  }
  .main-content { margin-left: 240px; padding: 30px; }

  /* çµ„ä»¶æ¨£å¼ */
  .panel {
    background: #fff; border-radius: 16px; padding: 24px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.03); margin-bottom: 24px;
  }
  .stat-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 24px; }
  .stat-card { background: #fff; padding: 20px; border-radius: 16px; border-left: 5px solid var(--primary); }
  
  /* æŒ‰éˆ•èˆ‡è¡¨å–® */
  .btn {
    padding: 10px 18px; border-radius: 10px; border: none; font-weight: 600;
    cursor: pointer; transition: 0.2s; display: inline-flex; align-items: center; gap: 8px;
  }
  .btn-primary { background: var(--primary); color: white; }
  .btn-danger { background: #FFF0F0; color: var(--danger); }
  .btn-outline { background: transparent; border: 1px solid #DDD; }

  input, select, textarea {
    width: 100%; padding: 12px; margin: 8px 0 16px;
    border: 1px solid #E5E5E5; border-radius: 10px; background: #F9F9F9;
  }

  /* è¡¨æ ¼å„ªåŒ– */
  table { width: 100%; border-collapse: collapse; }
  th { text-align: left; padding: 16px; border-bottom: 2px solid var(--bg); color: var(--text-muted); font-weight: 500; }
  td { padding: 16px; border-bottom: 1px solid var(--bg); vertical-align: middle; }
  .img-preview { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; background: #EEE; }

  .status-pill { padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
  .s-preparing { background: #FFF7E6; color: var(--warning); }
  .s-submitted { background: #E6F0FF; color: var(--primary); }
  .s-ready { background: #E6FFE6; color: var(--success); }

  .hidden { display: none; }
  .nav-item { 
    padding: 12px 16px; border-radius: 10px; margin-bottom: 8px; 
    cursor: pointer; color: var(--text-muted); transition: 0.3s;
  }
  .nav-item:hover, .nav-item.active { background: #F0F6FF; color: var(--primary); font-weight: 600; }
</style>
</head>
<body>

  <div id="loginView">
    <div class="login-card">
      <h2 style="margin-top:0">ç¿è­·å­¸é™¢ Admin</h2>
      <p style="color:var(--text-muted)">è«‹è¼¸å…¥æ‚¨çš„æ¬Šé™å¸³è™Ÿä»¥ç¹¼çºŒ</p>
      <label>å¸³è™Ÿ</label>
      <input type="text" id="user" value="admin">
      <label>å¯†ç¢¼</label>
      <input type="password" id="pass" value="1234">
      <button class="btn btn-primary" style="width:100%; justify-content:center" onclick="handleLogin()">é€²å…¥ç³»çµ±</button>
    </div>
  </div>

  <div id="adminView">
    <div class="sidebar">
      <h2 style="color:var(--primary)">ç¿è­·ç®¡ç†ç«¯</h2>
      <div class="nav-item active" onclick="switchSection('dashboard', this)">ğŸ“Š å„€è¡¨æ¿ç¸½è¦½</div>
      <div class="nav-item" onclick="switchSection('orders', this)">ğŸ“¦ è¨‚å–®ç®¡ç†</div>
      <div class="nav-item" onclick="switchSection('inventory', this)">ğŸ å•†å“ç¶­è­·</div>
      <hr style="border:0; border-top:1px solid #EEE; margin: 20px 0">
      <div class="nav-item" onclick="location.reload()" style="color:var(--danger)">ğŸšª å®‰å…¨ç™»å‡º</div>
    </div>

    <div class="main-content">
      <div id="section-dashboard" class="content-section">
        <h1>å„€è¡¨æ¿ç¸½è¦½</h1>
        <div class="stat-grid">
          <div class="stat-card">
            <div style="font-size:14px; color:var(--text-muted)">ä»Šæ—¥å¾…è™•ç†è¨‚å–®</div>
            <div style="font-size:28px; font-weight:bold">12 ç­†</div>
          </div>
          <div class="stat-card" style="border-left-color: var(--success)">
            <div style="font-size:14px; color:var(--text-muted)">å·²å®Œæˆçµæ¡ˆ (æœ¬æœˆ)</div>
            <div style="font-size:28px; font-weight:bold">158 ç­†</div>
          </div>
          <div class="stat-card" style="border-left-color: var(--warning)">
            <div style="font-size:14px; color:var(--text-muted)">ä½åº«å­˜è­¦ç¤º</div>
            <div style="font-size:28px; font-weight:bold">3 é …</div>
          </div>
        </div>
      </div>

      <div id="section-orders" class="content-section hidden">
        <h1>è¨‚å–®ç®¡ç†</h1>
        <div class="panel">
          <table>
            <thead>
              <tr>
                <th>è¨‚å–®è™Ÿ</th><th>ç”³è«‹äºº</th><th>éƒ¨é–€</th><th>æ—¥æœŸ</th><th>ç‹€æ…‹</th><th>æ“ä½œ</th>
              </tr>
            </thead>
            <tbody id="ordersBody"></tbody>
          </table>
        </div>
      </div>

      <div id="section-inventory" class="content-section hidden">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
          <h1>å•†å“èˆ‡åº«å­˜ç¶­è­·</h1>
          <button class="btn btn-primary" onclick="toggleAddModal()">ï¼‹ æ–°å¢å•†å“</button>
        </div>
        
        <div class="panel">
          <table>
            <thead>
              <tr>
                <th>åœ–ç‰‡</th><th>å•†å“åç¨±</th><th>å–®åƒ¹</th><th>å‰©é¤˜åº«å­˜</th><th>æ“ä½œ</th>
              </tr>
            </thead>
            <tbody id="inventoryBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div id="addModal" class="hidden" style="position:fixed; inset:0; background:rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; z-index:100">
    <div class="panel" style="width:400px">
      <h3>æ–°å¢å…¬é—œå•†å“</h3>
      <label>å•†å“ç…§ç‰‡</label>
      <input type="file" id="itemPic" accept="image/*" onchange="previewFile()">
      <img id="uploadPreview" class="img-preview" style="width:100px; height:100px; display:none; margin-bottom:10px">
      
      <label>å•†å“åç¨±</label>
      <input type="text" id="itemName" placeholder="ä¾‹å¦‚ï¼šåŒ—é†«å¹³å®‰åŒ…">
      <label>å–®åƒ¹</label>
      <input type="number" id="itemPrice" placeholder="460">
      <label>åˆå§‹åº«å­˜</label>
      <input type="number" id="itemStock" placeholder="50">
      
      <div style="display:flex; gap:10px">
        <button class="btn btn-outline" style="flex:1" onclick="toggleAddModal()">å–æ¶ˆ</button>
        <button class="btn btn-primary" style="flex:1" onclick="addNewItem()">ç¢ºèªæ–°å¢</button>
      </div>
    </div>
  </div>

  <script>
    // è±å¯Œçš„è™›æ“¬è³‡æ–™
    let MOCK_ORDERS = [
      { id: 'TASK-103', name: 'å¼µæ™ºç¶­', dept: 'ER æ€¥è¨ºå®¤', date: '2026-02-12', status: 'PREPARING' },
      { id: 'TASK-104', name: 'é™³é›…å©·', dept: 'ICU é‡ç—‡å®¤', date: '2026-02-13', status: 'SUBMITTED' },
      { id: 'TASK-105', name: 'ç‹å¤§åŒ', dept: 'OPD é–€è¨º', date: '2026-02-13', status: 'READY' }
    ];

    let MOCK_ITEMS = [
      { id: 1, name: 'åŒ—é†«å¹³å®‰åŒ…', price: 460, stock: 15, img: 'https://via.placeholder.com/50' },
      { id: 2, name: 'ç’°ä¿çº–ç¶­è¢‹', price: 50, stock: 120, img: 'https://via.placeholder.com/50' },
      { id: 3, name: 'ç¿è­·ç²¾è£½ç­†', price: 25, stock: 5, img: 'https://via.placeholder.com/50' }
    ];

    function handleLogin() {
      const u = document.getElementById('user').value;
      if (u === 'admin') {
        document.getElementById('loginView').style.display = 'none';
        document.getElementById('adminView').style.display = 'block';
        renderAll();
      }
    }

    function switchSection(secId, el) {
      document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
      document.getElementById('section-' + secId).classList.remove('hidden');
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      el.classList.add('active');
    }

    function renderAll() {
      // æ¸²æŸ“è¨‚å–®
      document.getElementById('ordersBody').innerHTML = MOCK_ORDERS.map(o => `
        <tr>
          <td><b>${o.id}</b></td><td>${o.name}</td><td>${o.dept}</td><td>${o.date}</td>
          <td><span class="status-pill s-${o.status.toLowerCase()}">${o.status}</span></td>
          <td><button class="btn btn-outline">è©³ç´°</button></td>
        </tr>
      `).join('');

      // æ¸²æŸ“åº«å­˜
      document.getElementById('inventoryBody').innerHTML = MOCK_ITEMS.map(i => `
        <tr>
          <td><img src="${i.img}" class="img-preview"></td>
          <td><b>${i.name}</b></td>
          <td>NT$ ${i.price}</td>
          <td style="${i.stock < 10 ? 'color:red; font-weight:bold' : ''}">${i.stock} ä»¶</td>
          <td><button class="btn btn-danger" onclick="removeItem(${i.id})">ç§»é™¤</button></td>
        </tr>
      `).join('');
    }

    // æ–°å¢å•†å“åŠŸèƒ½
    function toggleAddModal() {
      const m = document.getElementById('addModal');
      m.classList.toggle('hidden');
    }

    function previewFile() {
      const preview = document.getElementById('uploadPreview');
      const file = document.getElementById('itemPic').files[0];
      const reader = new FileReader();
      reader.onloadend = () => { preview.src = reader.result; preview.style.display = 'block'; }
      if (file) reader.readAsDataURL(file);
    }

    function addNewItem() {
      const name = document.getElementById('itemName').value;
      const price = document.getElementById('itemPrice').value;
      const stock = document.getElementById('itemStock').value;
      const img = document.getElementById('uploadPreview').src;

      if (!name || !price) return alert('è«‹å¡«å¯«å®Œæ•´è³‡è¨Š');

      MOCK_ITEMS.push({ id: Date.now(), name, price, stock, img });
      renderAll();
      toggleAddModal();
      // æ¸…ç©ºè¡¨å–®
      document.getElementById('itemName').value = '';
      document.getElementById('uploadPreview').style.display = 'none';
    }

    function removeItem(id) {
      if (confirm('ç¢ºå®šè¦æ°¸ä¹…ç§»é™¤æ­¤å•†å“å—ï¼Ÿ')) {
        MOCK_ITEMS = MOCK_ITEMS.filter(i => i.id !== id);
        renderAll();
      }
    }
  </script>
</body>
</html>
